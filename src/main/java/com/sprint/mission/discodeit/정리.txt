디스코드

- 유저
- 채널
- 메시지

- 유저는 채널과 메시지가 없어도 된다. 유저만 생성될 수 있다.
- 채널은 유저가 있어야 한다. 메시지는 없어도 된다.
- 채널은 유저 목록과 작성된 메시지 목록을 가지고 있고, 어떤 메시지를 누가 작성했는지 알고 있다.
- 메시지는 유저가 있어야 한다. 누가 보낸 메시지인지 알아야 한다.
- 유저끼리 메시지를 주고 받는다면 유저와 메시지는 존재해야 하지만 채널은 없어도 된다. 일단 구현을 미루자.
- 채널에서 메시지를 주고 받는다면 유저, 메시지, 채널 모두 존재해야 한다.
- 유저는 자신이 어떤 채널에 속해 있는지 알 수 있다.
- 유저는 채널에서만 메시지를 확인할 수 있다. 유저만으로 메시지를 조회할 수 없다.
- 유저는 자신이 속한 채널에 자신이 보낸 메시지만 수정 가능하다.
- 유저는 자신이 채널을 만들거나 채널에 초대를 받아야만 채널에 참가할 수 있다.
- 유저 삭제는 채널에서 유저 삭제로 이어진다.
- 채널 삭제가 유저 삭제로 이어지진 않는다.

지금은 각자 서로의 데이터를 가지고 있으니 정합성을 위한 작업이 필요하다.

채널 생성 시 - 채널 저장소에 추가, 유저의 채널 목록에 추가
유저 생성 시 - 유저 저장소에 추가
메시지 생성 시 - 메시지 저장소에 추가, 유저의 메시지 목록에 추가, 채널의 메시지 목록에 추가

채널 수정 시 - 채널 저장소에 추가, 유저의 채널 목록에서 수정, 메시지의 채널에서 수정
유저 수정 시 - 유저 저장소에 추가, 채널의 유저 목록에서 수정, 메시지의 유저에서 수정
메시지 수정 시 - 메시지 저장소에 추가, 유저의 메시지 목록에서 수정, 채널의 메시지 목록에서 수정

채널 삭제 시 - 채널 저장소에서 삭제, 유저의 채널 목록에서 삭제, 해당 채널에 속한 메시지 전부 삭제
유저 삭제 시 - 유저 저장소에서 삭제, 채널의 유저 목록에서 삭제, 해당 유저에 속한 메시지 전부 삭제
메시지 삭제 시 - 메시지 저장소에서 삭제, 채널의 메시지 목록에서 삭제, 유저의 메시지 목록에서 삭제